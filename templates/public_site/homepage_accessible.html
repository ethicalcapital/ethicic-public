{% extends "public_site/base.html" %}
{% load wagtailcore_tags %}

{% block title %}Ethical Capital - Where Ethics Drive Investment Excellence{% endblock %}

{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/16-homepage.css' %}?v=2025071202">
<style>
/* Critical fix for dark mode text visibility in strategy cards */
[data-theme="dark"] .strategy-card .strategy-table th {
    color: #fff !important;
    -webkit-text-fill-color: #fff !important;
}

[data-theme="dark"] .strategy-table .subtitle {
    color: rgba(255, 255, 255, 0.9) !important;
    -webkit-text-fill-color: rgba(255, 255, 255, 0.9) !important;
}

/* Light mode should also have consistent colors */
[data-theme="light"] .strategy-card .strategy-table th {
    color: #fff !important;
    -webkit-text-fill-color: #fff !important;
}

[data-theme="light"] .strategy-table .subtitle {
    color: rgba(255, 255, 255, 0.9) !important;
    -webkit-text-fill-color: rgba(255, 255, 255, 0.9) !important;
}
</style>
{% endblock %}

{% block body_class %}home-page{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="garden-container">
    <section class="garden-panel hero-panel" role="banner" aria-labelledby="hero-heading">
        <div class="garden-panel__content garden-panel-content">
        <div class="hero-tagline">{{ page.hero_tagline }}</div>
        <h1 id="hero-heading" class="hero-title">{{ page.hero_title }}</h1>
        <div class="hero-subtitle">{{ page.hero_subtitle|richtext }}</div>

        <div class="cta-actions">
            <a href="{{ page.hero_cta_1_link }}" class="garden-action primary">{{ page.hero_cta_1_text }}</a>
            <a href="{{ page.hero_cta_2_link }}" class="garden-action secondary">{{ page.hero_cta_2_text }}</a>
        </div>

        <div class="hero-stats">
            <div class="stat-item">
                <div class="stat-bar">
                    <div class="stat-fill stat-fill-57"></div>
                </div>
                <span class="stat-value">{{ page.excluded_percentage }}</span>
                <span class="stat-label">S&P 500 EXCLUDED</span>
                <span class="stat-date">{{ page.hero_stats_date }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-value"><span id="years-counter">3+</span> YEARS</span>
                <span class="stat-label">OF FIDUCIARY COUNSEL</span>
            </div>
        </div>
        </div>
    </section>
</div>

<!-- Investment Philosophy Section -->
<div class="garden-container">
    <section class="garden-panel" role="main" aria-labelledby="philosophy-heading">
    <div class="garden-panel__header garden-panel-header">
        <div class="panel-title">{{ page.philosophy_section_header|default:"OUR INVESTMENT PHILOSOPHY" }}</div>
    </div>
    <div class="garden-panel__content garden-panel-content">
        <div class="philosophy-content">
            <h2 id="philosophy-heading">{{ page.philosophy_title }}</h2>
            {{ page.philosophy_content|richtext }}
            <p class="philosophy-highlight">
                {{ page.philosophy_highlight }}
            </p>
        </div>
        </div>
    </section>
</div>

<!-- Principles Section -->
<div class="garden-container">
    <section class="garden-panel principles-panel" role="main" aria-labelledby="principles-heading">
        <div class="garden-panel__header garden-panel-header">
            <h2 id="principles-heading" class="panel-title">{{ page.principles_section_header|default:"PRINCIPLES THAT GUIDE OUR WORK" }}</h2>
        </div>
        <div class="garden-panel__content garden-panel-content">
            <!-- Process Section -->
            <div class="principles-section">
                <h3 class="principles-section-header">{{ page.process_subsection_header }}</h3>
                <div class="principles-grid">
                    <div class="principle-card">
                        <h4 class="principle-title">{{ page.process_principle_1_title }}</h4>
                        <p class="principle-content">{{ page.process_principle_1_content }}</p>
                    </div>
                    <div class="principle-card">
                        <h4 class="principle-title">{{ page.process_principle_2_title }}</h4>
                        <p class="principle-content">{{ page.process_principle_2_content }}</p>
                    </div>
                    <div class="principle-card">
                        <h4 class="principle-title">{{ page.process_principle_3_title }}</h4>
                        <p class="principle-content">{{ page.process_principle_3_content }}</p>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="principles-section">
                <h3 class="principles-section-header">{{ page.practice_subsection_header }}</h3>
                <div class="principles-grid">
                    <div class="principle-card">
                        <h4 class="principle-title">{{ page.practice_principle_1_title }}</h4>
                        <p class="principle-content">{{ page.practice_principle_1_content }}</p>
                    </div>
                    <div class="principle-card">
                        <h4 class="principle-title">{{ page.practice_principle_2_title }}</h4>
                        <p class="principle-content">{{ page.practice_principle_2_content }}</p>
                    </div>
                    <div class="principle-card">
                        <h4 class="principle-title">{{ page.practice_principle_3_title }}</h4>
                        <p class="principle-content">{{ page.practice_principle_3_content }}</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Strategies Section -->
<div class="garden-container">
    <section class="garden-panel" role="main" aria-labelledby="strategies-heading">
    <div class="garden-panel__header garden-panel-header">
        <div class="panel-title">{{ page.strategies_section_header|default:"THREE CORE STRATEGIESâ€”MULTIPLE PATHS FORWARD" }}</div>
    </div>
    <div class="garden-panel__content garden-panel-content">
        {{ page.strategies_intro|richtext }}

        <div class="strategies-grid">
            <div class="strategy-card">
                <table class="strategy-table">
                    <thead>
                        <tr>
                            <th colspan="2">
                                {{ page.strategy_1_name }}
                                <div class="subtitle">{{ page.strategy_1_subtitle }}</div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="label">{{ page.strategy_label_focus }}</td>
                            <td>{{ page.strategy_1_focus }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_screening }}</td>
                            <td>{{ page.strategy_1_screening }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_management }}</td>
                            <td>{{ page.strategy_1_management }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_ownership }}</td>
                            <td>{{ page.strategy_1_ownership }}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="strategy-features">
                    <p>{{ page.strategy_1_description }}</p>
                    <a href="{{ page.strategy_1_link }}" class="garden-action">{{ page.strategy_1_link_text }}</a>
                </div>
            </div>

            <div class="strategy-card">
                <table class="strategy-table">
                    <thead>
                        <tr>
                            <th colspan="2">
                                {{ page.strategy_2_name }}
                                <div class="subtitle">{{ page.strategy_2_subtitle }}</div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="label">{{ page.strategy_label_focus }}</td>
                            <td>{{ page.strategy_2_focus }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_screening }}</td>
                            <td>{{ page.strategy_2_screening }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_management }}</td>
                            <td>{{ page.strategy_2_management }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_ownership }}</td>
                            <td>{{ page.strategy_2_ownership }}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="strategy-features">
                    <p>{{ page.strategy_2_description }}</p>
                    <a href="{{ page.strategy_2_link }}" class="garden-action">{{ page.strategy_2_link_text }}</a>
                </div>
            </div>

            <div class="strategy-card">
                <table class="strategy-table">
                    <thead>
                        <tr>
                            <th colspan="2">
                                {{ page.strategy_3_name }}
                                <div class="subtitle">{{ page.strategy_3_subtitle }}</div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="label">{{ page.strategy_label_focus }}</td>
                            <td>{{ page.strategy_3_focus }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_screening }}</td>
                            <td>{{ page.strategy_3_screening }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_management }}</td>
                            <td>{{ page.strategy_3_management }}</td>
                        </tr>
                        <tr>
                            <td class="label">{{ page.strategy_label_ownership }}</td>
                            <td>{{ page.strategy_3_ownership }}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="strategy-features">
                    <p>{{ page.strategy_3_description }}</p>
                    <a href="{{ page.strategy_3_link }}" class="garden-action">{{ page.strategy_3_link_text }}</a>
                </div>
            </div>
        </div>
        </div>
    </section>
</div>

<!-- Process Section - Updated -->
<div class="garden-container">
    <section class="garden-panel" role="main" aria-labelledby="process-section-heading">
    <div class="garden-panel__header garden-panel-header">
        <h2 id="process-section-heading" class="panel-title">{{ page.process_section_header|default:"OUR SIGNATURE PROCESS" }}</h2>
    </div>
    <div class="garden-panel__content garden-panel-content">
        <h3 id="process-heading" class="text-center">How We Build Ethical Portfolios</h3>

        <div class="process-container">
            <div class="process-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>{{ page.process_step_1_title }}</h4>
                    <p>{{ page.process_step_1_content }}</p>
                </div>
            </div>

            <div class="process-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>{{ page.process_step_2_title }}</h4>
                    <p>{{ page.process_step_2_content }}</p>
                </div>
            </div>

            <div class="process-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>{{ page.process_step_3_title }}</h4>
                    <p>{{ page.process_step_3_content }}</p>
                </div>
            </div>

            <div class="process-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>{{ page.process_step_4_title }}</h4>
                    <p>{{ page.process_step_4_content }}</p>
                </div>
            </div>
        </div>

        <div class="text-center margin-top-8">
            <a href="{{ page.process_section_link }}" class="garden-action primary">{{ page.process_section_link_text }}</a>
        </div>
        </div>
    </section>
</div>

<!-- Who We Serve Section -->
<div class="garden-container">
    <section class="garden-panel" role="main" aria-labelledby="serve-heading">
    <div class="garden-panel__header garden-panel-header">
        <div class="panel-title">{{ page.serve_section_header|default:"WHO WE SERVE" }}</div>
    </div>
    <div class="garden-panel__content garden-panel-content">
        <div class="serve-grid">
            <div class="serve-item">
                <h3>{{ page.serve_individual_title }}</h3>
                <p>{{ page.serve_individual_content }}</p>
                <a href="{{ page.serve_individual_link }}" class="garden-action secondary">{{ page.serve_individual_link_text }}</a>
            </div>

            <div class="serve-item">
                <h3>{{ page.serve_advisor_title }}</h3>
                <p>{{ page.serve_advisor_content }}</p>
                <a href="{{ page.serve_advisor_link }}" class="garden-action secondary">{{ page.serve_advisor_link_text }}</a>
            </div>

            <div class="serve-item">
                <h3>{{ page.serve_institution_title }}</h3>
                <p>{{ page.serve_institution_content }}</p>
                <a href="{{ page.serve_institution_link }}" class="garden-action secondary">{{ page.serve_institution_link_text }}</a>
            </div>
        </div>
        </div>
    </section>
</div>

<!-- CTA Section -->
<div class="garden-container">
    <section class="garden-panel cta-panel">
        <div class="garden-panel__header garden-panel-header">
            <div class="panel-title">{{ page.accepting_clients_icon }} {{ page.client_availability_text|upper }}</div>
        </div>
        <div class="garden-panel__content garden-panel-content">
        <h2>{{ page.cta_title }}</h2>
        {{ page.cta_description|richtext }}

        <div class="cta-actions">
            <a href="{{ page.cta_button_1_link }}" class="garden-action primary">{{ page.cta_button_1_text }}</a>
            <a href="{{ page.cta_button_2_link }}" class="garden-action secondary">{{ page.cta_button_2_text }}</a>
        </div>
        </div>
    </section>
</div>

{% endblock %}

{% block extra_js %}
{% load static %}
<script src="{% static 'js/strategy-card-color-fix.js' %}?v=1"></script>
<script>
    // Debug: Check if CTA section exists
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded - checking for CTA section...');
        const ctaSection = document.querySelector('.cta-panel');
        const ctaActions = document.querySelector('.cta-actions');
        const ctaButtons = document.querySelectorAll('.cta-actions .garden-action');

        console.log('CTA Panel found:', !!ctaSection);
        console.log('CTA Actions found:', !!ctaActions);
        console.log('CTA Buttons found:', ctaButtons.length);

        if (ctaSection) {
            console.log('CTA Section visible:', window.getComputedStyle(ctaSection).display !== 'none');
            console.log('CTA Section styles:', {
                display: window.getComputedStyle(ctaSection).display,
                visibility: window.getComputedStyle(ctaSection).visibility,
                opacity: window.getComputedStyle(ctaSection).opacity,
                height: window.getComputedStyle(ctaSection).height
            });
        }

        if (ctaActions) {
            console.log('CTA Actions visible:', window.getComputedStyle(ctaActions).display !== 'none');
        }

        ctaButtons.forEach((btn, idx) => {
            console.log(`Button ${idx + 1}:`, btn.textContent.trim(), btn.href);
        });
    });
</script>
<script>
    // Calculate years since October 2021
    document.addEventListener('DOMContentLoaded', function() {
        const startDate = new Date('2021-10-01');
        const currentDate = new Date();

        // Calculate years difference
        let years = currentDate.getFullYear() - startDate.getFullYear();
        const monthDiff = currentDate.getMonth() - startDate.getMonth();

        // Adjust if we haven't reached October yet in the current year
        if (monthDiff < 0 || (monthDiff === 0 && currentDate.getDate() < startDate.getDate())) {
            years--;
        }

        // Check if we're in October (month 9 in JavaScript)
        const isOctober = currentDate.getMonth() === 9;

        // Update the counter
        const counter = document.getElementById('years-counter');
        if (counter) {
            // Show exact years in October, otherwise show with +
            counter.textContent = isOctober ? years.toString() : years + '+';

            // Add a subtle animation
            counter.style.opacity = '0';
            setTimeout(() => {
                counter.style.transition = 'opacity 0.5s ease-in';
                counter.style.opacity = '1';
            }, 100);
        }
    });
</script>
{% endblock %}
