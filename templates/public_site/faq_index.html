{% extends "public_site/base.html" %}
{% load wagtailcore_tags static %}

{% block title %}{{ page.title }} - Ethical Capital{% endblock %}

{% block content %}
<div class="garden-container">
<!-- Streamlined Hero Section -->
<section class="hero-panel" role="banner" aria-labelledby="hero-heading">
    <div class="hero-panel-content">
        <div class="hero-content-grid">
            <!-- Main Hero Content -->
            <div class="hero-main">
                <h1 id="hero-heading" class="hero-title">{{ page.title }}</h1>
                {% if page.intro_text %}
                    <div class="hero-subtitle">{{ page.intro_text|richtext }}</div>
                {% endif %}
                {% if page.description %}
                    <div class="hero-description">
                        {{ page.description|richtext }}
                    </div>
                {% endif %}
            </div>
            
            <!-- Hero Utilities -->
            <div class="hero-utilities">
                <!-- Contact Information -->
                <div class="hero-contact">
                    <h3 class="utility-title">NEED HELP?</h3>
                    <div class="contact-content">
                        <p class="contact-description">Can't find what you're looking for? We're here to help.</p>
                    </div>
                    <a href="/contact/" class="garden-action secondary">CONTACT US</a>
                </div>

                <!-- Quick Actions -->
                <div class="hero-quick-actions">
                    <h3 class="utility-title">QUICK ACCESS</h3>
                    <div class="quick-actions-links">
                        <p class="actions-placeholder">Access our most frequently requested resources and support materials.</p>
                    </div>
                    <a href="/encyclopedia/" class="garden-action secondary">BROWSE ENCYCLOPEDIA</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Articles Section -->
<section class="articles-section">
    <div class="articles-content">
        <div class="articles-container">
        <!-- FAQ Articles Content -->
        <div class="articles-main">
        
        <!-- FAQ Articles -->
        <section class="faq-articles">
            <div class="section-title-wrapper">
                <h2 class="section-title">FREQUENTLY ASKED QUESTIONS</h2>
            </div>
            {% with articles=page.get_articles %}
                {% if articles %}
                    <div class="articles-list" id="faq-container">
                        {% for article in articles %}
                        <article class="article-list-item" data-article-id="{{ article.id }}">
                            <div class="article-list-content">
                                <div class="article-list-text">
                                    {% if article.category %}
                                        <div class="article-list-meta">
                                            <div class="article-list-tags">
                                                <span class="article-list-tag">{{ article.get_category_display }}</span>
                                            </div>
                                        </div>
                                    {% endif %}
                                    
                                    <h2 class="article-list-title">
                                        <a href="{{ article.url }}">{{ article.title }}</a>
                                    </h2>
                                    
                                    {% if article.summary %}
                                        <p class="article-list-excerpt">{{ article.summary|truncatewords:25 }}</p>
                                    {% endif %}
                                    
                                    <div class="article-list-actions">
                                        <a href="{{ article.url }}" class="garden-action secondary small">READ ANSWER</a>
                                    </div>
                                </div>
                            </div>
                        </article>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="no-articles">
                        <h3>NO FAQ ARTICLES YET</h3>
                        <p>We're building our FAQ section. In the meantime, please don't hesitate to contact us directly with any questions.</p>
                        <div class="no-articles-cta">
                            <a href="/contact/" class="garden-action primary">CONTACT US</a>
                        </div>
                    </div>
                {% endif %}
            {% endwith %}
        </section>
        </div> <!-- End articles-main -->
        
        <!-- Sidebar -->
        <aside class="blog-sticky-sidebar" aria-label="FAQ sidebar">
            <!-- Contact Section -->
            <div class="sidebar-section contact-section">
                <div class="garden-panel">
                    <div class="garden-panel__header garden-panel-header">
                        <div class="panel-title">GET HELP</div>
                    </div>
                    <div class="garden-panel__content garden-panel-content">
                        <p class="sidebar-description">Still have questions? We're here to provide personalized assistance.</p>
                        
                        {% if page.contact_email %}
                            <div class="contact-method">
                                <a href="mailto:{{ page.contact_email }}" class="garden-action secondary full-width">EMAIL US</a>
                            </div>
                        {% endif %}
                        
                        {% if page.meeting_link %}
                            <div class="contact-method">
                                <a href="{{ page.meeting_link }}" class="garden-action primary full-width" target="_blank" rel="noopener">SCHEDULE MEETING</a>
                            </div>
                        {% endif %}
                        
                        {% if page.contact_phone %}
                            <div class="contact-method">
                                <a href="tel:{{ page.contact_phone }}" class="garden-action secondary full-width">CALL US</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Resources Section -->
            <div class="sidebar-section resources-section">
                <div class="garden-panel">
                    <div class="garden-panel__header garden-panel-header">
                        <div class="panel-title">RESOURCES</div>
                    </div>
                    <div class="garden-panel__content garden-panel-content">
                        <p class="sidebar-description">Explore our comprehensive resources for ethical investing.</p>
                        <div class="resource-links">
                            <a href="/encyclopedia/" class="resource-link" aria-label="Browse our investing encyclopedia">
                                <span class="resource-icon">ðŸ“š</span>
                                <span class="resource-text">Encyclopedia</span>
                            </a>
                            <a href="/blog/" class="resource-link" aria-label="Read our latest insights">
                                <span class="resource-icon">ðŸ“–</span>
                                <span class="resource-text">Blog</span>
                            </a>
                            <a href="/media/" class="resource-link" aria-label="View media coverage">
                                <span class="resource-icon">ðŸ“º</span>
                                <span class="resource-text">Media</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        </div>
    </div>
</section>
</div>
{% endblock %}

{% block extra_css %}
<!-- Garden UI Compliant FAQ Stylesheets - Matching Blog Structure -->
<link rel="stylesheet" href="{% static 'css/garden-blog.css' %}?v=20250621-dark-mode-badge-fix">
<link rel="stylesheet" href="{% static 'css/garden-blog-hero.css' %}?v=20250621-bottom-align-utilities">
<link rel="stylesheet" href="{% static 'css/garden-blog-articles.css' %}?v=20250621-dark-mode-badge-fix">
<link rel="stylesheet" href="{% static 'css/garden-blog-panels.css' %}?v=20250621-dark-mode-badge-fix">
<link rel="stylesheet" href="{% static 'css/garden-blog-sidebar.css' %}?v=20250621-dark-mode-badge-fix">
{% endblock %}