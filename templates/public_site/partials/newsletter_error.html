<form id="newsletter-form"
      action="{% url 'public_site:newsletter_subscribe' %}"
      method="post"
      hx-post="{% url 'public_site:newsletter_subscribe' %}"
      hx-target="#newsletter-form"
      hx-swap="outerHTML"
      x-data="{ submitting: false }"
      @submit="submitting = true">
    {% csrf_token %}
    <div class="error-message">{{ error }}</div>
    <div class="garden-input-group">
        <label for="email" class="garden-label">Email Address</label>
        <input type="email"
               id="email"
               name="email"
               class="garden-input error"
               placeholder="your@email.com"
               required
               :disabled="submitting" />
    </div>
    <button type="submit"
            class="garden-action primary"
            :disabled="submitting"
            x-text="submitting ? 'Subscribing...' : 'Try Again'">Try Again</button>
</form>
<style>
  .error-message {
    background: var(--color-error-light);
    color: var(--color-error);
    padding: var(--space-3);
    border-radius: var(--radius-sm);
    margin-bottom: var(--space-4);
  }

  .garden-input.error {
    border-color: var(--color-error);
  }
</style>
EOF < /dev/null
