/*
 * Intelligent Text Visibility System
 * Replaces the aggressive emergency CSS with contrast-aware styling
 * Ensures WCAG 2.1 AA compliance while maintaining design integrity
 */

/* ===== DARK BACKGROUND TEXT (Default Site Theme) ===== */
/* For elements on dark backgrounds (body, main sections) */
body,
.bg-gray-900,
.bg-slate-900,
.bg-purple-900,
[data-theme="dark"] {
    color: #e2e8f0; /* Light gray text for dark backgrounds */
}

/* Main content areas on dark backgrounds */
body p,
body div:not(.bg-white):not(.bg-gray-100):not(.bg-slate-100),
body span:not(.bg-white):not(.bg-gray-100),
body li,
body td,
body th,
body label,
.prose {
    color: #e2e8f0;
}

/* Headers on dark backgrounds - brighter for hierarchy */
body h1,
body h2,
body h3,
body h4,
body h5,
body h6 {
    color: #f3f4f6;
}

/* ===== LIGHT BACKGROUND TEXT (Cards, Modals, Forms) ===== */
/* For elements on white/light backgrounds */
.bg-white,
.bg-gray-100,
.bg-slate-100,
.bg-gray-50,
.card,
.modal,
.panel,
.form-container {
    color: #1f2937; /* Dark text for light backgrounds */
}

/* Content within light background containers */
.bg-white p,
.bg-white div,
.bg-white span,
.bg-white h1,
.bg-white h2,
.bg-white h3,
.bg-white h4,
.bg-white h5,
.bg-white h6,
.bg-white li,
.bg-white td,
.bg-white th,
.bg-white label,
.bg-gray-100 p,
.bg-gray-100 div,
.bg-gray-100 span,
.bg-gray-100 h1,
.bg-gray-100 h2,
.bg-gray-100 h3,
.bg-gray-100 h4,
.bg-gray-100 h5,
.bg-gray-100 h6,
.bg-gray-100 li,
.bg-gray-100 td,
.bg-gray-100 th,
.bg-gray-100 label {
    color: #1f2937 !important; /* Dark text for readability */
}

/* ===== STRATEGY CARDS AND CONTENT SECTIONS ===== */
/* Strategy cards often have light backgrounds */
.strategy-card,
.strategy-details,
.strategy-features,
.card-ec,
.content-card {
    background-color: #f8fafc; /* Ensure light background */
    color: #1f2937; /* Dark text */
}

.strategy-card *,
.strategy-details *,
.strategy-features *,
.card-ec *,
.content-card * {
    color: #1f2937 !important; /* Force dark text in cards */
}

/* ===== INVESTMENT PHILOSOPHY AND CONTENT AREAS ===== */
/* These sections often have white/light backgrounds */
.investment-philosophy,
.our-process,
.client-focus,
.philosophy-section,
.content-section {
    background-color: #ffffff;
    color: #1f2937;
}

.investment-philosophy *,
.our-process *,
.client-focus *,
.philosophy-section *,
.content-section * {
    color: #1f2937 !important;
}

/* ===== FORM ELEMENTS ===== */
/* Forms need dark text for visibility */
input,
textarea,
select,
.form-control {
    color: #1f2937 !important;
    background-color: #ffffff;
}

input::placeholder,
textarea::placeholder {
    color: #6b7280; /* Gray placeholder text */
}

/* ===== LINKS ===== */
/* Links on dark backgrounds */
body a:not(.btn-ec-primary):not(.btn-ec-secondary) {
    color: #94a3b8; /* Light gray links */
}

body a:hover:not(.btn-ec-primary):not(.btn-ec-secondary) {
    color: #f1f5f9; /* Brighter on hover */
}

/* Links on light backgrounds */
.bg-white a:not(.btn-ec-primary):not(.btn-ec-secondary),
.bg-gray-100 a:not(.btn-ec-primary):not(.btn-ec-secondary),
.card a:not(.btn-ec-primary):not(.btn-ec-secondary) {
    color: #3b82f6 !important; /* Blue links for light backgrounds */
}

.bg-white a:hover:not(.btn-ec-primary):not(.btn-ec-secondary),
.bg-gray-100 a:hover:not(.btn-ec-primary):not(.btn-ec-secondary),
.card a:hover:not(.btn-ec-primary):not(.btn-ec-secondary) {
    color: #1d4ed8 !important; /* Darker blue on hover */
}

/* ===== BUTTON PRESERVATION ===== */
/* Maintain existing button styling */
.btn-ec-primary {
    color: #ffffff !important;
    background-color: #581c87 !important;
}

.btn-ec-secondary {
    color: #1f2937 !important;
    background-color: #14b8a6 !important;
}

/* ===== NAVIGATION PRESERVATION ===== */
/* Keep navigation styling intact */
header,
nav,
.navigation,
.main-menu {
    color: #ffffff; /* White text in navigation */
}

header *,
nav *,
.navigation *,
.main-menu * {
    color: inherit; /* Inherit navigation colors */
}

/* ===== SPECIFIC CONTENT OVERRIDES ===== */
/* Homepage hero content on dark background */
.hero-section,
.hero-content {
    color: #e2e8f0;
}

/* Statistics and metrics on dark backgrounds */
.stats-section,
.metrics-display,
.performance-stats {
    color: #e2e8f0;
}

/* Footer content on dark background */
footer {
    color: #cbd5e1;
}

footer * {
    color: inherit;
}

/* ===== ACCESSIBILITY AND HIGH CONTRAST ===== */
/* High contrast mode support */
@media (prefers-contrast: high) {
    .bg-white,
    .bg-gray-100 {
        color: #000000 !important; /* Pure black for high contrast */
    }
    
    body,
    .bg-gray-900 {
        color: #ffffff !important; /* Pure white for high contrast */
    }
    
    a {
        text-decoration: underline !important;
        border-bottom: 2px solid currentColor !important;
    }
}

/* ===== UTILITY OVERRIDES ===== */
/* Tailwind utility class preservation */
.text-white {
    color: #ffffff !important;
}

.text-black {
    color: #000000 !important;
}

.text-gray-900 {
    color: #111827 !important;
}

.text-gray-100 {
    color: #f3f4f6 !important;
}

/* ===== DEBUGGING HELPERS ===== */
/* Uncomment for debugging text visibility issues */
/*
.debug-text-visibility * {
    outline: 1px solid red !important;
    background: rgba(255, 0, 0, 0.1) !important;
}
*/

/* ===== MOBILE AND RESPONSIVE ===== */
@media (max-width: 768px) {
    /* Mobile-specific text adjustments */
    .mobile-content {
        color: #1f2937;
        background-color: #ffffff;
    }
    
    /* Ensure mobile cards have proper contrast */
    .mobile-card,
    .sm\:bg-white {
        color: #1f2937 !important;
        background-color: #ffffff !important;
    }
}

/* ===== PRINT STYLES ===== */
@media print {
    * {
        color: #000000 !important; /* Black text for printing */
        background: #ffffff !important; /* White background for printing */
    }
}

/* ===== FALLBACK FOR UNKNOWN BACKGROUNDS ===== */
/* If background color cannot be determined, use safe defaults */
.unknown-bg {
    color: #1f2937; /* Dark text */
    background-color: #ffffff; /* Light background */
}

/* Auto-detect and fix common problematic combinations */
.auto-contrast {
    color: contrast(#ffffff, #1f2937, #e2e8f0); /* CSS4 contrast function when available */
}