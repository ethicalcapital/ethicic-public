/* ========================================
   WCAG AA COLOR CONTRAST FIXES
   Ensures 4.5:1 contrast ratio compliance
   ======================================== */

/* ===== OVERRIDE POOR CONTRAST COMBINATIONS ===== */

/* Fix primary button contrast issues */
.garden-action.primary,
button.primary,
.btn-primary {
    background: var(--color-primary, #8b5cf6) !important;
    color: var(--color-on-primary, #ffffff) !important;
    border: 2px solid var(--color-primary, #8b5cf6) !important;
}

.garden-action.primary:hover,
.garden-action.primary:focus {
    background: var(--color-primary-dark, #7c3aed) !important;
    border-color: var(--color-primary-dark, #7c3aed) !important;
    color: var(--color-on-primary, #ffffff) !important;
}

/* Fix secondary button contrast */
.garden-action.secondary,
button.secondary,
.btn-secondary {
    background: var(--color-surface, #ffffff) !important;
    color: var(--color-primary, #8b5cf6) !important;
    border: 2px solid var(--color-primary, #8b5cf6) !important;
}

.garden-action.secondary:hover,
.garden-action.secondary:focus {
    background: var(--color-primary-light, #f3e8ff) !important;
    color: var(--color-primary-dark, #7c3aed) !important;
    border-color: var(--color-primary-dark, #7c3aed) !important;
}

/* ===== TEXT CONTRAST FIXES ===== */

/* Ensure sufficient contrast for body text */
body,
p,
div,
li {
    color: var(--color-on-surface, #1a1a1a) !important;
}

/* EXCEPTION: Allow stat-value spans to keep their purple color */
.stat-value,
.stat-value span {
    color: var(--color-primary, #8b5cf6) !important;
}

/* Link contrast */
a {
    color: var(--color-primary, #8b5cf6) !important;
}

a:hover,
a:focus {
    color: var(--color-primary-dark, #7c3aed) !important;
}

/* Visited links */
a:visited {
    color: var(--color-primary-visited, #6b46c1) !important;
}

/* ===== FORM ELEMENT CONTRAST ===== */

/* Input field contrast */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="tel"],
input[type="url"],
input[type="search"],
input[type="number"],
input[type="date"],
textarea,
select {
    background: var(--color-surface, #ffffff) !important;
    color: var(--color-on-surface, #1a1a1a) !important;
    border: 2px solid var(--color-border, #d1d5db) !important;
}

input:focus,
textarea:focus,
select:focus {
    border-color: var(--color-primary, #8b5cf6) !important;
    box-shadow: 0 0 0 1px var(--color-primary, #8b5cf6) !important;
}

/* Form labels */
label {
    color: var(--color-on-surface, #1a1a1a) !important;
    font-weight: 600 !important;
}

/* Error states */
.error,
.field-error,
.invalid-feedback,
.form-error {
    color: var(--color-error, #dc2626) !important;
    background: var(--color-error-light, #fef2f2) !important;
    border-color: var(--color-error, #dc2626) !important;
}

/* Success states */
.success,
.field-success,
.valid-feedback,
.form-success {
    color: var(--color-success, #059669) !important;
    background: var(--color-success-light, #f0fdf4) !important;
    border-color: var(--color-success, #059669) !important;
}

/* ===== TABLE CONTRAST ===== */

table,
.table {
    color: var(--color-on-surface, #1a1a1a) !important;
}

th {
    background: var(--color-surface-elevated, #f8fafc) !important;
    color: var(--color-on-surface, #1a1a1a) !important;
    border: 1px solid var(--color-border, #d1d5db) !important;
}

td {
    color: var(--color-on-surface, #1a1a1a) !important;
    border: 1px solid var(--color-border-light, #e5e7eb) !important;
}

/* ===== PANEL CONTRAST ===== */

.garden-panel {
    background: var(--color-surface, #ffffff) !important;
    border: 1px solid var(--color-border, #d1d5db) !important;
}

.garden-panel__header,
.garden-panel-header {
    background: var(--color-surface-elevated, #f8fafc) !important;
    color: var(--color-on-surface, #1a1a1a) !important;
    border-bottom: 1px solid var(--color-border, #d1d5db) !important;
}

.panel-title {
    color: var(--color-primary, #8b5cf6) !important;
}

/* ===== NAVIGATION CONTRAST ===== */

.garden-nav a,
.garden-nav-item {
    color: var(--color-on-primary, #ffffff) !important;
}

.garden-nav a:hover,
.garden-nav-item:hover {
    color: var(--color-on-primary, #ffffff) !important;
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Footer */
.garden-footer {
    background: var(--color-surface-elevated, #f8fafc) !important;
    color: var(--color-on-surface, #1a1a1a) !important;
}

.garden-footer-link {
    color: var(--color-primary, #8b5cf6) !important;
}

.garden-footer-link:hover {
    color: var(--color-primary-dark, #7c3aed) !important;
}

/* ===== HIGH CONTRAST MODE SUPPORT ===== */

@media (prefers-contrast: high) {
    /* Enhance contrast even further for users who prefer it */
    body,
    p,
    div,
    li {
        color: #000000 !important;
    }
    
    /* Stat values maintain visibility in high contrast */
    .stat-value,
    .stat-value span {
        color: #4c1d95 !important; /* Darker purple for higher contrast */
        font-weight: 700 !important;
    }
    
    a {
        color: #4c1d95 !important;
        text-decoration: underline !important;
    }
    
    .garden-action.primary {
        background: #4c1d95 !important;
        border-color: #4c1d95 !important;
    }
}

/* ===== DARK THEME ADJUSTMENTS ===== */

[data-theme="dark"] {
    /* Dark theme text contrast */
    body,
    p,
    div,
    li {
        color: var(--color-on-background, #e5e7eb) !important;
    }
    
    /* Stat values in dark theme */
    .stat-value,
    .stat-value span {
        color: var(--color-primary-light, #a78bfa) !important;
    }
    
    a {
        color: var(--color-primary-light, #a78bfa) !important;
    }
    
    .garden-panel {
        background: var(--color-surface-dark, #1f2937) !important;
        border-color: var(--color-border-dark, #374151) !important;
    }
}