/*!
 * Header Text Styling - Clean Implementation
 * Ensures proper text visibility in header without !important wars
 */

@layer components {
  /* ===== HEADER TEXT FOUNDATION ===== */

  /* Base header text styling using theme variables */
  .garden-header {
    color: var(--garden-header-text, var(--color-on-primary));
    background: var(--garden-header-bg, var(--color-primary));
  }

  /* Header navigation elements */
  .garden-header .garden-brand,
  .garden-header .garden-nav-item,
  .garden-header .desktop-nav a,
  .garden-header .garden-login-btn,
  .garden-header .garden-action,
  .garden-header .garden-theme-toggle {
    color: var(--garden-header-text, var(--color-on-primary));
  }

  /* Header links */
  .garden-header a:not(.garden-login-item) {
    color: var(--garden-header-link, var(--color-on-primary));
    text-decoration: none;
    transition: opacity var(--duration-fast) var(--ease-out);
  }

  .garden-header a:hover:not(.garden-login-item) {
    opacity: 0.9;
  }

  /* ===== SEARCH INPUT STYLING ===== */

  /* Search input requires special handling for readability */
  .garden-header .garden-search-input,
  .garden-header .mobile-search-input {
    background: var(--garden-search-bg, var(--color-surface));
    border: 1px solid var(--garden-search-border, var(--color-border));
    color: var(--garden-search-text, var(--color-text-primary));
    border-radius: var(--radius-md);
  }

  .garden-header .garden-search-input::placeholder {
    color: var(--garden-search-placeholder, var(--color-text-secondary));
  }

  /* Theme-specific search styling */
  [data-theme="light"] .garden-header .garden-search-input,
  [data-theme="light"] .garden-header .mobile-search-input,
  [data-theme="light"] .mobile-search-input {
    background: var(--garden-color-white);
    border-color: var(--garden-color-gray-200);
    color: var(--garden-color-gray-900);
  }

  [data-theme="dark"] .garden-header .garden-search-input,
  [data-theme="dark"] .garden-header .mobile-search-input {
    background: var(--color-surface);
    border-color: var(--color-border);
    color: var(--garden-fg);
  }

  /* ===== MOBILE MENU ELEMENTS ===== */

  /* Mobile menu toggle bars */
  .garden-header .mobile-menu-toggle span {
    background-color: var(--garden-header-text, var(--color-on-primary));
    transition: background-color var(--duration-fast) var(--ease-out);
  }

  /* ===== LOGIN DROPDOWN OVERRIDES ===== */

  /* Login dropdown should use normal text colors, not header colors */
  .garden-login-dropdown,
  .garden-login-dropdown .garden-login-item {
    background: var(--color-surface);
    color: var(--color-text-primary);
  }

  .garden-login-dropdown .login-title {
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
  }

  .garden-login-dropdown .login-desc {
    color: var(--color-text-secondary);
  }

  /* ===== PANEL HEADERS ===== */

  /* Panel headers should use surface colors, not header colors */
  .garden-panel__header,
  .garden-panel-header,
  .panel-header {
    background: var(--color-surface-variant);
    color: var(--color-text-primary);
    border-bottom: 1px solid var(--color-border);
  }

  .panel-title {
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
  }

  /* ===== ACCESSIBILITY SUPPORT ===== */

  /* High contrast mode adjustments */
  @media (prefers-contrast: high) {
    .garden-header {
      background: Canvas;
      color: CanvasText;
      border-bottom: 2px solid CanvasText;
    }

    .garden-header .garden-search-input {
      background: Field;
      color: FieldText;
      border-color: CanvasText;
    }

    .garden-login-dropdown {
      background: Canvas;
      color: CanvasText;
      border: 2px solid CanvasText;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .garden-header a,
    .garden-header .garden-search-input,
    .garden-header .mobile-menu-toggle span {
      transition: none;
    }
  }
}

@layer utilities {
  /* ===== EMERGENCY OVERRIDES ===== */
  /* Use utilities layer for any needed high-specificity fixes */

  /* Force header text visibility when needed */
  .garden-header.force-white-text,
  .garden-header.force-white-text * {
    color: var(--garden-color-white);
  }

  /* Force search input readability */
  .garden-search-input.force-readable {
    background: var(--color-surface);
    color: var(--color-text-primary);
    border-color: var(--color-border);
  }
}