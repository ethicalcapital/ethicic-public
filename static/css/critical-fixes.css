/*!
 * Critical Layout Fixes
 * Emergency fixes for header positioning and footer width issues
 * Maximum specificity to override any conflicting styles
 */

/* ===== NUCLEAR HEADER POSITIONING ===== */
/* Ensure header CANNOT be scrolled over by ANY content with MAXIMUM specificity */
html body.public-site-context header.garden-header,
html body.public-site-context.public-site-context header.garden-header,
html body header.garden-header,
body.public-site-context header.garden-header,
header.garden-header,
.garden-header {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    height: auto !important;
    min-height: 60px !important;
    max-height: 80px !important;
    z-index: 2147483647 !important; /* Maximum possible z-index */
    background: var(--color-primary, var(--garden-accent)) !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15) !important;
    border-bottom: 1px solid rgba(255,255,255,0.1) !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    transition: none !important;
}

/* Force body padding to account for fixed header with EXTREME specificity */
html body.public-site-context,
html body.public-site-context.public-site-context,
html body,
body.public-site-context,
body {
    padding-top: 80px !important;
    margin-top: 0 !important;
}

/* Emergency body style reset to prevent any margin/padding interference */
html,
html body.public-site-context,
html body {
    box-sizing: border-box !important;
}

/* CRITICAL: Remove any potential whitespace above header */
html {
    margin: 0 !important;
    padding: 0 !important;
}

/* Ensure skip links don't create space above header */
html body.public-site-context .skip-link,
html body .skip-link,
.skip-link {
    position: absolute !important;
    top: -9999px !important;
    left: -9999px !important;
    width: 1px !important;
    height: 1px !important;
    margin: 0 !important;
    padding: 0 !important;
}

.skip-link:focus {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    z-index: 2147483646 !important; /* Just below header */
    width: auto !important;
    height: auto !important;
}

/* Ensure no content can possibly overlap header */
html body.public-site-context > *:not(.garden-header),
html body > *:not(.garden-header),
body.public-site-context > *:not(.garden-header),
body > *:not(.garden-header) {
    margin-top: 0 !important;
    position: relative !important;
}

/* Ensure ALL content stays below header */
html body.public-site-context * {
    position: relative;
}

/* NUCLEAR OPTION: Completely override all z-index values */
html body.public-site-context *:not(.garden-header):not(.garden-header *):not(.skip-link) {
    z-index: 1 !important; /* Force everything WAY below header */
}

/* Double-check main content specifically */
html body.public-site-context main,
html body.public-site-context .main-content,
html body.public-site-context main.main-content {
    z-index: 1 !important;
    position: relative !important;
}

/* Ensure hero and content panels stay below */
html body.public-site-context section,
html body.public-site-context .garden-panel,
html body.public-site-context .hero-panel {
    z-index: 1 !important;
    position: relative !important;
}

/* Override any high z-index elements */
html body.public-site-context .modal,
html body.public-site-context .popup,
html body.public-site-context .dropdown,
html body.public-site-context .tooltip,
html body.public-site-context .overlay,
html body.public-site-context .garden-context-menu,
html body.public-site-context .feedback-modal {
    z-index: 99998 !important; /* Below header but above other content */
}

/* ===== BULLETPROOF FOOTER WIDTH CONSTRAINT ===== */
/* Force footer to match container width with maximum specificity */
html body.public-site-context footer.garden-footer,
html body footer.garden-footer,
footer.garden-footer {
    width: 100% !important;
    background: var(--color-surface) !important;
    margin: 0 !important;
    padding: var(--space-8) 0 var(--space-6) !important;
}

html body.public-site-context .garden-footer .garden-footer-content,
html body .garden-footer .garden-footer-content,
.garden-footer .garden-footer-content {
    max-width: var(--content-width-normal) !important;
    width: 100% !important;
    margin: 0 auto !important;
    padding: 0 var(--space-6) !important;
    box-sizing: border-box !important;
}

/* Force footer grid to stay within constraints */
html body.public-site-context .garden-footer-grid,
html body .garden-footer-grid,
.garden-footer-grid {
    max-width: none !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
}

/* ===== CONTAINER CONSISTENCY ENFORCEMENT ===== */
/* Ensure ALL major containers use consistent width */
html body.public-site-context .main-content,
html body.public-site-context .garden-panel-content,
html body.public-site-context .panel-content,
html body.public-site-context .garden-header-content,
html body .main-content,
html body .garden-panel-content,
html body .panel-content,
html body .garden-header-content {
    max-width: var(--content-width-normal) !important;
    margin-left: auto !important;
    margin-right: auto !important;
    box-sizing: border-box !important;
}

/* ===== RESPONSIVE FOOTER FIXES ===== */
@media (max-width: 768px) {
    html body.public-site-context .garden-footer-content,
    html body .garden-footer-content,
    .garden-footer-content {
        padding: 0 var(--space-4) !important;
    }
}

@media (max-width: 480px) {
    html body.public-site-context .garden-footer-content,
    html body .garden-footer-content,
    .garden-footer-content {
        padding: 0 var(--space-3) !important;
    }
}

/* ===== EMERGENCY LAYOUT RESETS ===== */
/* Reset any potential layout breakers */
html body.public-site-context {
    overflow-x: hidden !important;
}

html body.public-site-context .garden-footer {
    overflow-x: hidden !important;
}

/* Ensure content doesn't escape containers */
html body.public-site-context .garden-footer-content > * {
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* ===== DEBUG: Visible container boundaries (remove in production) ===== */
/* Uncomment these lines to see container boundaries for debugging
.garden-footer-content {
    border: 2px solid red !important;
}

.main-content {
    border: 2px solid blue !important;
}

.garden-header-content {
    border: 2px solid green !important;
}
*/